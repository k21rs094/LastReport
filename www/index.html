<!DOCTYPE HTML>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, user-scalable=no">
  <script src="components/loader.js"></script>
  <link rel="stylesheet" href="components/loader.css">
  <link rel="stylesheet" href="css/styles.css">
  <script src="js/ncmb-latest.min.js"></script>
  <script src="js/keys.js"></script>
  <script src="js/app.js"></script>
  <script src="js/cssua.min.js"></script>
</head>
    <script>
        // NCMB アクセスの準備
        let ncmb = new NCMB(appKey, clientKey);
        // 利用するデータベースを指定（存在しなければ生成）
        let TestClass = ncmb.DataStore("Book");
        // コールバックの登録など
        $(function() {
            $("#message").html("initialized");
            $("#btnA").click(function(e) {
                btnAClick(e);
            })
            $("#btnB").click(function(e) {
                btnBClick(e);
            })
        });

        function btnAClick(e) {
            // 登録するレコードを用意
            let newRecord = new TestClass();
            let key = $("#book_title").val();
            let value = $("#book_price").val();
            // レコードのフィールドと値を設定
            newRecord.set(key, value);
            // レコードをデータベースに登録
            newRecord.save();
            $("#message").html("btnA clicked !");
        }

        function btnBClick(e) {
            // 登録するレコードを用意
            let newRecord = new TestClass();
            let key = $("#field").val();
            let value = $("#value").val();
            // レコードのフィールドと値を設定
            newRecord.set(key, value);
            // レコードをデータベースに登録
            newRecord.save()
                .then(function(m) {
                    $("#message").html("New object created with objectId: " + newRecord.objectId);
                })
                .catch(function(err) {
                    $("#message").html("Failed to create new object, with error code: " + JSON.stringify(err));
                })
        }
    </script>
<body>

  <!-- ログインページ -->
  <div data-role="page" id="LoginPage">
    <header data-role="header" data-position="fixed" data-theme="c">
      <h1>アプリデモ</h1>
    </header>
      <section data-role="content">
      <h1>ログイン</h1>
      ユーザー名
        <input type="text" id="login_username">
      パスワード
        <input type="password" id="login_password">
      新規登録？
        <a href="#RegisterPage" data-role="button" data-mini="true" data-inline="true" data-theme="b">登録</a>
        <a href="#" id="LoginBtn" data-role="button" data-inline="false" data-theme="b">ログインする</a>
      </section>
  </div>

  <!-- 登録ページ -->
  <div data-role="page" id="RegisterPage">
    <header data-role="header" data-position="fixed" data-theme="c">
      <h1>アプリデモ</h1>
    </header>
      <section data-role="content">
      <h1>新規登録</h1>
      ユーザー名
        <input type="text" id="reg_username">
      パスワード
        <input type="password" id="reg_password">
        <a href="#" id="RegisterBtn" data-role="button" data-inline="false" data-theme="b">登録する</a>
        <a href="#LoginPage" data-role="button" data-mini="true" data-inline="true" data-theme="b">戻る</a>
      </section>
  </div>

  <!-- 詳細ページ -->
  <div data-role="page" id="DetailPage">
    <header data-role="header" data-position="fixed" data-theme="c">
      <h1>アプリデモ</h1>
      <a href="#yesNoDialog_logout" class="ui-btn-left" data-rel="popup" data-position-to="window" data-role="button" data-inline="false" data-theme="b">ログアウト</a>
      <!--本のタイトルの入力欄 -->
      <div>
          <label for="book_title">Book title:</label>
          <input id="book_title" type="text" value="Ex:Harry Potter">
      </div>

      <!--本の税込価格の入力欄 -->
      <div>
          <label for="book_price">Book price:</label>
          <input id="book_price" type="number" value="2090">
      </div>
      <div id="button">
          <!--Addボタン -->
          <button id="Add_btn" class="btn" onclick="addBtn()">Add</button>
      </div>
    </header>
    <section data-role="content">
      <!--Detail show-->
      <div data-role="content" id="detailArea">ようこそ！ログイン成功しました！</div>
      <!--Dialog box confirming logout-->
      <div data-role="popup" id="yesNoDialog_logout" data-overlay-theme="a" data-theme="c" data-dismissible="false" style="max-width:400px;" class="ui-corner-all">
        <div data-role="header" data-theme="c" class="ui-corner-top" style="top: 0 !important;">
          <h1>ログアウト確認</h1>
        </div>
        <div align="middle" data-role="content" data-theme="d" class="ui-corner-bottom ui-content">
          <h3 class="ui-title">
          <p>ログアウトしてもよろしいですか？</p>
          <a href="#" id="YesBtn_logout" data-role="button" data-inline="true" data-transition="flow" data-theme="b">はい</a>
          <a href="#" data-role="button" data-inline="true" data-rel="back" data-transition="flow" data-theme="b">いいえ</a>
        </div>
      </div>
    </section>
  </div>
</body>
</html>